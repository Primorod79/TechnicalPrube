<div class="container mt-4">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading product details...</p>
  </div>

  <!-- Product Details -->
  <div *ngIf="!isLoading && product" class="row">
    <div class="col-md-12">
      <!-- Back Button -->
      <button class="btn btn-outline-secondary mb-3" (click)="goBack()">
        <i class="bi bi-arrow-left"></i> Back to Products
      </button>

      <div class="card">
        <div class="row g-0">
          <!-- Product Image -->
          <div class="col-md-4">
            <img 
              [src]="product.imageUrl || 'https://via.placeholder.com/400x400?text=No+Image'" 
              [alt]="product.name"
              class="img-fluid rounded-start product-image">
          </div>

          <!-- Product Info -->
          <div class="col-md-8">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <h2 class="card-title">{{ product.name }}</h2>
                <span class="badge bg-primary fs-5">${{ product.price }}</span>
              </div>

              <div class="mb-3">
                <span class="badge bg-info me-2">{{ product.category?.name || 'Uncategorized' }}</span>
                <span 
                  class="badge" 
                  [class.bg-success]="product.stock > 10"
                  [class.bg-warning]="product.stock > 0 && product.stock <= 10"
                  [class.bg-danger]="product.stock === 0">
                  {{ product.stock > 0 ? product.stock + ' in stock' : 'Out of stock' }}
                </span>
              </div>

              <div class="mb-4">
                <h5>Description</h5>
                <p class="card-text">{{ product.description }}</p>
              </div>

              <div class="mb-3">
                <small class="text-muted">
                  <strong>Created:</strong> {{ product.createdAt | date:'medium' }}
                </small>
                <br>
                <small class="text-muted" *ngIf="product.updatedAt">
                  <strong>Last Updated:</strong> {{ product.updatedAt | date:'medium' }}
                </small>
              </div>

              <!-- Admin Actions -->
              <div *ngIf="isAdmin" class="btn-group" role="group">
                <a 
                  [routerLink]="['/products/edit', product.id]" 
                  class="btn btn-warning">
                  <i class="bi bi-pencil"></i> Edit Product
                </a>
                <button 
                  class="btn btn-danger" 
                  (click)="deleteProduct()"
                  [disabled]="isDeleting">
                  <span *ngIf="isDeleting" class="spinner-border spinner-border-sm me-1"></span>
                  <i *ngIf="!isDeleting" class="bi bi-trash"></i> 
                  {{ isDeleting ? 'Deleting...' : 'Delete Product' }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && !product" class="alert alert-warning">
    <h4 class="alert-heading">Product not found</h4>
    <p>The product you're looking for doesn't exist or has been removed.</p>
    <button class="btn btn-primary" (click)="goBack()">Go back to products</button>
  </div>
</div>
